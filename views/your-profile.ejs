<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./partials/head.ejs') %>
  </head>
  <body>
    <%- include('./partials/header.ejs') %>
    <main>
      <div class="page-title-off-card uppercase">
        <h1>your profile</h1>
      </div>
      <div class="card">
        <%# if (!currentUser) { %> 
        <!-- <p>No current user is logged in.</p> -->
        <%# } else { %>
          <% let number = 2 %>
          <% if (users.length !== 0) { %>
            <div class="profile-data">
              <div class="avatar-image-container-wide">
                <div 
                  class="avatar-image-circle avatar-circle-large" 
                  style="
                    --avatar-fg: <%= users[number].avatar_color_fg || 'var(--off-black)' %>;
                    --avatar-bg-top: <%= users[number].avatar_color_bg_top || 'var(--off-white)' %>;
                    --avatar-bg-bottom: <%= users[number].avatar_color_bg_bottom || 'var(--off-gray)' %>;
                  ">
                  <span class="emoji avatar-emoji-large-size" role="img" aria-label="avatar image">
                    <!-- ðŸˆâ€â¬› -->
                    <%= users[number].avatarLetter %>
                    <%#= users[number].avatar_type %>
                  </span>
                </div>            
            </div>
              <dl class="profile-data-dl">
                <div>
                  <dt class="capitalize">name</dt>
                  <dd class="capitalize bold"><%= users[number].first_name %> <%= users[number].last_name %></dd>
                </div>
                <div>
                  <dt class="capitalize">status</dt>
                  <dd class="bold"><%= users[number].permission_status %></dd>
                </div>
                <div>
                  <dt class="capitalize">email</dt>
                  <dd class="bold"><%= users[number].email%></dd>
                </div>
                <div>
                  <dt class="capitalize">phone</dt>
                  <dd class="bold"><%= users[number].phone || "n/a" %></dd>
                </div>
                <div>
                  <dt class="capitalize">birthdate</dt>
                  <dd class="bold"><%= users[number].formattedBirthdate %> (age: <%= users[number].age %>)</dd>
                </div>
                <div>
                  <dt class="capitalize">street</dt>
                  <dd class="bold"><%= users[number].street_address || "n/a" %></dd>
                </div>
                <div>
                  <dt class="capitalize">apt/unit</dt>
                  <dd class="bold"><%= users[number].apt_unit || "n/a" %></dd>
                </div>
                <div>
                  <dt class="capitalize">city</dt>
                  <dd class="bold"><%= users[number].city || "n/a" %></dd>
                </div>
                <div>
                  <dt class="capitalize">state</dt>
                  <dd class="bold"><%= users[number].us_state || "n/a" %></dd>
                </div>
                <div>
                  <dt class="capitalize">zip code</dt>
                  <dd class="bold"><%= users[number].zip_code || "n/a" %></dd>
                </div>
              </dl>
              <div class="button-container-col">
                <a class="fake-button wide-button" href="/app/delete">delete account</a> 
                <span class="ui-message-warning uppercase">deletion of account is permanent.</span>
                <!-- NOTE - below should be hidden if user has member status! -->
                <% if (users[number].permission_status === "guest" && users[number].member_request === false) { %>
                  <!-- <button class="wide-button">upgrade to member</button> -->
                  <button class="wide-button" onclick="openModal('modal-become-member', 'modal-title-become-member')">
                    upgrade to member
                  </button>
                <% } %>
                <% if (users[number].permission_status !== "guest") { %>
                <a class="fake-button wide-button" href="/app/member-directory">member directory</a>
                <% } %>
                <!-- Below - a link or button????? -->
                <!-- <a class="fake-button wide-button" href="/app/update-profile">update profile</a> -->
                <button class="wide-button" onclick="openModal('modal-edit-profile-user', 'modal-title-edit-profile-user')">
                    update your profile
                  </button>
                <!-- <a class="fake-button wide-button" href="/app/change-avatar">change avatar</a> -->
                <button class="wide-button" onclick="openModal('modal-change-avatar', 'modal-title-change-avatar')">
                  change this avatar
                </button>
              </div>
            </div>
          <% } %>
        </div>

        </div>

        </div>
      </div>
    </main>
    <%- include('./partials/modal-root.ejs') %>
    <%- include('./partials/footer.ejs') %>
  </body>
</html>
